---
import { CreatePost } from '../components/CreatePost'
import { Terms } from '../components/Terms'
import Layout from '../layouts/Layout.astro'
---

<Layout title="OuReal. - Entroido">
  <script>
    import type { Images } from '../components/CreatePost'

    const termsAccepted = localStorage.getItem('termsAccepted') === 'true'

    let lsImages = localStorage.getItem('images')
    const imagesObj = lsImages ? (JSON.parse(lsImages) as Images) : { user: null, environment: null }

    if (termsAccepted) {
      window.location.href = imagesObj.user && imagesObj.environment ? '/feed' : '/new'
    }
  </script>

  <Terms client:load />
</Layout>
